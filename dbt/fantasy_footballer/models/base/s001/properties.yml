version: 2

models:
  - name: base_s001__players
    description: Staging model for fantasy football players with season-level statistics and metadata
    columns:
      - name: player_year_id
        description: Unique identifier combining player ID and year
        data_type: varchar
        tests:
          - unique
          - not_null
      - name: team_year_id
        description: Unique identifier combining team ID and year
        data_type: varchar
        tests:
          - not_null
      - name: player_id
        description: Unique identifier for the player
        data_type: varchar
        tests:
          - not_null
      - name: player_name
        description: Player's full name
        data_type: varchar
        tests:
          - not_null
      - name: year
        description: Season year
        data_type: integer
        tests:
          - not_null
      - name: eligible_slots
        description: Array of eligible roster slots for the player (e.g., RB, FLEX, BENCH)
        data_type: varchar[]
      - name: nfl_team
        description: NFL team abbreviation
        data_type: varchar
      - name: team_id
        description: Fantasy team ID the player is assigned to
        data_type: integer
      - name: position_slot
        description: Primary fantasy position (QB, RB, WR, TE, K, D/ST)
        data_type: varchar
      - name: is_injured
        description: Boolean flag indicating if player is currently injured
        data_type: boolean
      - name: total_points
        description: Total fantasy points scored for the season
        data_type: double
      - name: avg_points
        description: Average fantasy points per game
        data_type: double
      - name: projected_total_points
        description: Projected total fantasy points for the season
        data_type: double
      - name: projected_avg_points
        description: Projected average fantasy points per game
        data_type: double
      - name: percent_owned
        description: Percentage of leagues where player is rostered
        data_type: double
      - name: percent_started
        description: Percentage of leagues where player is in starting lineup
        data_type: double
      - name: stats_raw
        description: Raw nested statistics data containing week-by-week performance
        data_type: map(varchar, json)[]
      - name: position_rank
        description: Player's rank within their position
        data_type: integer
      - name: injury_status
        description: Current injury designation (e.g., OUT, QUESTIONABLE, DOUBTFUL, IR)
        data_type: varchar

  - name: base_s001__teams
    description: Staging model for fantasy football teams with season-level performance and owner information
    columns:
      - name: team_year_id
        description: Unique identifier for the fantasy team
        data_type: varchar
        tests:
          - not_null
          - unique
      - name: team_id
        description: Unique identifier for the fantasy team
        data_type: integer
        tests:
          - not_null
      - name: year
        description: Season year
        data_type: integer
        tests:
          - not_null
      - name: team_abbrev
        description: Team abbreviation or short name
        data_type: varchar
      - name: team_name
        description: Full team name
        data_type: varchar
      - name: division_id
        description: Unique identifier for the division
        data_type: integer
      - name: division_name
        description: Division name
        data_type: varchar
      - name: wins
        description: Total wins for the season
        data_type: integer
      - name: losses
        description: Total losses for the season
        data_type: integer
      - name: ties
        description: Total ties for the season
        data_type: integer
      - name: points_for
        description: Total points scored by the team
        data_type: double
      - name: points_against
        description: Total points scored against the team
        data_type: double
      - name: acquisitions
        description: Total number of player acquisitions (waiver pickups and free agent adds)
        data_type: integer
      - name: acquisition_budget_spent
        description: Total FAAB (Free Agent Acquisition Budget) spent
        data_type: integer
      - name: drops
        description: Total number of players dropped
        data_type: integer
      - name: trades
        description: Total number of trades completed
        data_type: integer
      - name: playoff_pct
        description: Playoff probability percentage
        data_type: double
      - name: draft_projected_rank
        description: Projected rank based on draft results
        data_type: integer
      - name: standing
        description: Current league standing
        data_type: integer
      - name: final_standing
        description: Final league standing at end of season
        data_type: integer
      - name: roster
        description: Array of player IDs on the team roster
        data_type: varchar[]
      - name: matchups_raw
        description: Raw nested matchup data containing matchup details by week
        data_type: varchar[]
      - name: first_name
        description: Team owner's first name (title case)
        data_type: varchar
      - name: last_name
        description: Team owner's last name (title case)
        data_type: varchar
      - name: display_name
        description: Team owner's full name (first name + last name)
        data_type: varchar
      - name: streak_type
        description: Type of streak (W for wins, L for losses)
        data_type: varchar
      - name: streak_length
        description: Length of streak
        data_type: varchar
      - name: streak
        description: Current streak in format of type + length (e.g., W3, L2)
        data_type: varchar